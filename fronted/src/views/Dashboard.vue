<template>
  <div class="dashboard">
    <div class="welcome-card">
      <div class="welcome-header">
        <div>
          <h2>æ¬¢è¿å›æ¥ï¼Œ{{ auth.username }}</h2>
          <p class="role-tag">{{ getRoleText(auth.role) }}</p>
        </div>
        <el-icon :size="48" color="#409eff"><UserFilled /></el-icon>
      </div>
    </div>

    <!-- ç®¡ç†å‘˜è§†å›¾ -->
    <template v-if="auth.role === 'ADMIN'">
      <div class="info-card">
        <h3>ğŸ“š å­¦ç”Ÿç®¡ç†ç³»ç»Ÿ</h3>
        <div class="system-summary">
          <p class="intro">åŸºäº <strong>Spring Boot 3 + Vue 3 + MySQL 8</strong> çš„ç°ä»£åŒ–æ•™åŠ¡ç®¡ç†å¹³å°ï¼Œæ”¯æŒå¤šè§’è‰²æƒé™ç®¡ç†å’Œå®Œæ•´çš„æ•™å­¦ä¸šåŠ¡æµç¨‹ã€‚</p>
          
          <div class="section">
            <h4>ğŸ¯ æ ¸å¿ƒåŠŸèƒ½</h4>
            <div class="feature-grid">
              <div class="feature-item">
                <el-icon :size="20" color="#409eff"><User /></el-icon>
                <div>
                  <strong>ç”¨æˆ·ç®¡ç†</strong>
                  <p>æ”¯æŒå­¦ç”Ÿã€æ•™å¸ˆã€ç®¡ç†å‘˜ä¸‰ç§è§’è‰²ï¼ŒåŸºäºJWTçš„å®‰å…¨è®¤è¯</p>
                </div>
              </div>
              <div class="feature-item">
                <el-icon :size="20" color="#67c23a"><Reading /></el-icon>
                <div>
                  <strong>åŒè¯¾ç¨‹ä½“ç³»</strong>
                  <p>æ­£è¯¾å…¨å‘˜å¯è§,é€‰è¯¾æ”¯æŒé€‰è¯¾å’Œäººæ•°é™åˆ¶</p>
                </div>
              </div>
              <div class="feature-item">
                <el-icon :size="20" color="#e6a23c"><EditPen /></el-icon>
                <div>
                  <strong>åŒæˆç»©ç®¡ç†</strong>
                  <p>é€‰è¯¾æˆç»©åŸºäºé€‰è¯¾è®°å½•ï¼Œæ­£è¯¾æˆç»©ç›´æ¥å…³è”è¯¾ç¨‹</p>
                </div>
              </div>
              <div class="feature-item">
                <el-icon :size="20" color="#f56c6c"><Document /></el-icon>
                <div>
                  <strong>ç»„ç»‡æ¶æ„</strong>
                  <p>é™¢ç³»-ä¸“ä¸š-ç­çº§ä¸‰çº§ç®¡ç†ï¼ŒåŠ¨æ€ä¸‹æ‹‰æ¡†æ•°æ®è”åŠ¨</p>
                </div>
              </div>
            </div>
          </div>

          <div class="section">
            <h4>ğŸ’¡ æŠ€æœ¯ç‰¹è‰²</h4>
            <div class="tech-tags">
              <el-tag type="primary">Spring Security + JWT</el-tag>
              <el-tag type="success">MyBatis + MySQL</el-tag>
              <el-tag type="warning">Vue 3 + TypeScript</el-tag>
              <el-tag type="danger">Element Plus</el-tag>
              <el-tag type="info">RESTful API</el-tag>
              <el-tag>Pinia çŠ¶æ€ç®¡ç†</el-tag>
            </div>
          </div>

          <div class="section">
            <h4>ğŸ‘¥ æƒé™è¯´æ˜</h4>
            <div class="role-list">
              <div class="role-item admin">
                <strong>ç®¡ç†å‘˜ (ADMIN)</strong>
                <p>æ‹¥æœ‰ç³»ç»Ÿå…¨éƒ¨æƒé™ï¼šç”¨æˆ·ç®¡ç†ã€ç»„ç»‡æ¶æ„ã€è¯¾ç¨‹ç®¡ç†ã€æˆç»©å½•å…¥</p>
              </div>
              <div class="role-item teacher">
                <strong>æ•™å¸ˆ (TEACHER)</strong>
                <p>æŸ¥çœ‹å­¦ç”Ÿä¿¡æ¯ã€ç®¡ç†è‡ªå·±çš„è¯¾ç¨‹ã€å½•å…¥è‡ªå·±è¯¾ç¨‹çš„æˆç»©</p>
              </div>
              <div class="role-item student">
                <strong>å­¦ç”Ÿ (STUDENT)</strong>
                <p>æµè§ˆè¯¾ç¨‹ä¿¡æ¯ã€é€‰è¯¾é€€è¯¾æ“ä½œã€æŸ¥çœ‹ä¸ªäººæˆç»©</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </template>

    <!-- æ•™å¸ˆè§†å›¾ -->
    <template v-else-if="auth.role === 'TEACHER'">
      <div class="info-card">
        <h3>ğŸ‘¨â€ğŸ« æ•™å¸ˆå·¥ä½œå°</h3>
        <div class="system-summary">
          <p class="intro">æ¬¢è¿ä½¿ç”¨å­¦ç”Ÿç®¡ç†ç³»ç»Ÿï¼æ‚¨å¯ä»¥ç®¡ç†è‡ªå·±çš„è¯¾ç¨‹ã€æŸ¥çœ‹å­¦ç”Ÿä¿¡æ¯å¹¶å½•å…¥æˆç»©ã€‚</p>
          
          <div class="section">
            <h4>ğŸ“– ä¸»è¦åŠŸèƒ½</h4>
            <div class="feature-grid">
              <div class="feature-item">
                <el-icon :size="20" color="#409eff"><Reading /></el-icon>
                <div>
                  <strong>è¯¾ç¨‹ç®¡ç†</strong>
                  <p>æŸ¥çœ‹å’Œç®¡ç†æ‚¨æ•™æˆçš„æ­£è¯¾å’Œé€‰è¯¾</p>
                </div>
              </div>
              <div class="feature-item">
                <el-icon :size="20" color="#67c23a"><EditPen /></el-icon>
                <div>
                  <strong>æˆç»©å½•å…¥</strong>
                  <p>ä¸ºæ‚¨çš„è¯¾ç¨‹å½•å…¥å’Œä¿®æ”¹å­¦ç”Ÿæˆç»©</p>
                </div>
              </div>
              <div class="feature-item">
                <el-icon :size="20" color="#e6a23c"><User /></el-icon>
                <div>
                  <strong>å­¦ç”Ÿç®¡ç†</strong>
                  <p>æŸ¥çœ‹å­¦ç”Ÿä¿¡æ¯å’Œé€‰è¯¾æƒ…å†µ</p>
                </div>
              </div>
            </div>
          </div>

          <div class="quick-links">
            <h4>ğŸ”— å¿«é€Ÿè®¿é—®</h4>
            <p>ä½¿ç”¨å·¦ä¾§å¯¼èˆªæ è®¿é—®ï¼š<strong>å­¦ç”Ÿ</strong> â†’ <strong>è¯¾ç¨‹</strong> â†’ <strong>æˆç»©</strong></p>
          </div>
        </div>
      </div>
    </template>

    <!-- å­¦ç”Ÿè§†å›¾ -->
    <template v-else-if="auth.role === 'STUDENT'">
      <div class="info-card">
        <h3>ğŸ‘¨â€ğŸ“ å­¦ç”Ÿå­¦ä¹ ä¸­å¿ƒ</h3>
        <div class="system-summary">
          <p class="intro">æ¬¢è¿ä½¿ç”¨å­¦ç”Ÿç®¡ç†ç³»ç»Ÿï¼æ‚¨å¯ä»¥æµè§ˆè¯¾ç¨‹ã€é€‰è¯¾é€€è¯¾å¹¶æŸ¥çœ‹ä¸ªäººæˆç»©ã€‚</p>
          
          <div class="section">
            <h4>ğŸ“š ä¸»è¦åŠŸèƒ½</h4>
            <div class="feature-grid">
              <div class="feature-item">
                <el-icon :size="20" color="#409eff"><Reading /></el-icon>
                <div>
                  <strong>æµè§ˆè¯¾ç¨‹</strong>
                  <p>æŸ¥çœ‹æ‰€æœ‰æ­£è¯¾å’Œæ‚¨å·²é€‰çš„é€‰è¯¾</p>
                </div>
              </div>
              <div class="feature-item">
                <el-icon :size="20" color="#67c23a"><EditPen /></el-icon>
                <div>
                  <strong>é€‰è¯¾ç®¡ç†</strong>
                  <p>é€‰æ‹©æ„Ÿå…´è¶£çš„è¯¾ç¨‹ï¼Œä¹Ÿå¯ä»¥é€€é€‰å·²é€‰è¯¾ç¨‹</p>
                </div>
              </div>
              <div class="feature-item">
                <el-icon :size="20" color="#e6a23c"><Trophy /></el-icon>
                <div>
                  <strong>æˆç»©æŸ¥è¯¢</strong>
                  <p>æŸ¥çœ‹æ‚¨çš„é€‰è¯¾æˆç»©å’Œæ­£è¯¾æˆç»©</p>
                </div>
              </div>
            </div>
          </div>

          <div class="quick-links">
            <h4>ğŸ”— å¿«é€Ÿè®¿é—®</h4>
            <p>ä½¿ç”¨å·¦ä¾§å¯¼èˆªæ è®¿é—®ï¼š<strong>è¯¾ç¨‹</strong> â†’ <strong>é€‰è¯¾</strong> â†’ <strong>æˆç»©</strong></p>
          </div>
        </div>
      </div>
    </template>
  </div>
</template>

<script setup lang="ts">
import { useAuthStore } from '@/stores/auth';
import { UserFilled, User, Reading, Document, EditPen, Trophy } from '@element-plus/icons-vue';

const auth = useAuthStore();

const getRoleText = (role: string | null) => {
  const roleMap: { [key: string]: string } = {
    'ADMIN': 'ç³»ç»Ÿç®¡ç†å‘˜',
    'TEACHER': 'æ•™å¸ˆ',
    'STUDENT': 'å­¦ç”Ÿ'
  };
  return role ? roleMap[role] : 'æœªçŸ¥è§’è‰²';
};
</script>

<style scoped>
.dashboard {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.welcome-card {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  padding: 32px;
  border-radius: 12px;
  color: white;
  box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
}

.welcome-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.welcome-header h2 {
  margin: 0;
  font-size: 28px;
  font-weight: 600;
}

.role-tag {
  margin: 8px 0 0 0;
  font-size: 14px;
  opacity: 0.9;
}



.info-card {
  background: #fff;
  padding: 24px;
  border-radius: 12px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
}
.system-summary .intro {
  font-size: 15px;
  color: #606266;
  line-height: 1.8;
  margin: 0 0 24px 0;
}

.section {
  margin-bottom: 24px;
}

.section h4 {
  font-size: 16px;
  color: #303133;
  margin: 0 0 16px 0;
  padding-left: 12px;
  border-left: 3px solid #409eff;
}

.feature-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 16px;
}

.feature-item {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 16px;
  background: #f5f7fa;
  border-radius: 8px;
  transition: all 0.3s;
}

.feature-item:hover {
  background: #ecf5ff;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(64, 158, 255, 0.1);
}

.feature-item > div {
  flex: 1;
}

.feature-item strong {
  display: block;
  font-size: 14px;
  color: #303133;
  margin-bottom: 4px;
}

.feature-item p {
  margin: 0;
  font-size: 13px;
  color: #909399;
  line-height: 1.6;
}

.tech-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.tech-tags .el-tag {
  font-size: 13px;
}

.role-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.role-item {
  padding: 16px;
  border-radius: 8px;
  border-left: 4px solid;
}

.role-item.admin {
  background: #fef0f0;
  border-color: #f56c6c;
}

.role-item.teacher {
  background: #f0f9ff;
  border-color: #409eff;
}

.role-item.student {
  background: #f0f9ff;
  border-color: #67c23a;
}

.role-item strong {
  display: block;
  font-size: 14px;
  color: #303133;
  margin-bottom: 6px;
}

.role-item p {
  margin: 0;
  font-size: 13px;
  color: #606266;
  line-height: 1.6;
}

.quick-links {
  margin-top: 24px;
  padding: 16px;
  background: #fef7e6;
  border-radius: 8px;
  border-left: 4px solid #e6a23c;
}

.quick-links h4 {
  font-size: 14px;
  color: #303133;
  margin: 0 0 8px 0;
}

.quick-links p {
  margin: 0;
  font-size: 13px;
  color: #606266;
  line-height: 1.6;
}

.quick-links strong {
  color: #e6a23c;
}
</style>
